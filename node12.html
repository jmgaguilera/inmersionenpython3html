<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//ES">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>9. Caso de estudio: migrar chardet a Python 3</TITLE>
<META NAME="description" CONTENT="9. Caso de estudio: migrar chardet a Python 3">
<META NAME="keywords" CONTENT="inmersionEnPython">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="inmersionEnPython.css">

<LINK REL="next" HREF="node13.html">
<LINK REL="previous" HREF="node11.html">
<LINK REL="up" HREF="inmersionEnPython.html">
<LINK REL="next" HREF="node13.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<B> Siguiente:</B> <A NAME="tex2html1027"
  HREF="node13.html">10. Empaquetando librerías en</A>
<B> Subir a:</B> <A NAME="tex2html1025"
  HREF="inmersionEnPython.html">Inmersión en Python 3</A>
<B> Anterior:</B> <A NAME="tex2html1019"
  HREF="node11.html">8. Serialización de Objetos</A>
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Apartados</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html1028"
  HREF="node12.html#SECTION001210000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">1</SPAN> Inmersión</A>
<LI><A NAME="tex2html1029"
  HREF="node12.html#SECTION001220000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">2</SPAN> ¿En qué consiste la detección automática?</A>
<UL>
<LI><A NAME="tex2html1030"
  HREF="node12.html#SECTION001221000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">1</SPAN> ¿Eso no es imposible?</A>
<LI><A NAME="tex2html1031"
  HREF="node12.html#SECTION001222000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">2</SPAN> ¿Existe tal algoritmo?</A>
</UL>
<BR>
<LI><A NAME="tex2html1032"
  HREF="node12.html#SECTION001230000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN> Introducción al módulo <SPAN  CLASS="textsf">chardet</SPAN></A>
<UL>
<LI><A NAME="tex2html1033"
  HREF="node12.html#SECTION001231000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">1</SPAN> <SPAN  CLASS="textsf">UTF-N</SPAN> con <SPAN  CLASS="textsf">BOM</SPAN></A>
<LI><A NAME="tex2html1034"
  HREF="node12.html#SECTION001232000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">2</SPAN> Codificaciones con código de escape</A>
<LI><A NAME="tex2html1035"
  HREF="node12.html#SECTION001233000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">3</SPAN> Codificaciones multibyte</A>
<LI><A NAME="tex2html1036"
  HREF="node12.html#SECTION001234000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">4</SPAN> Codificaciones de un solo byte</A>
<LI><A NAME="tex2html1037"
  HREF="node12.html#SECTION001235000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">5</SPAN> windows-1252</A>
</UL>
<BR>
<LI><A NAME="tex2html1038"
  HREF="node12.html#SECTION001240000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">4</SPAN> Ejecutando <SPAN  CLASS="textsf">2to3</SPAN></A>
<LI><A NAME="tex2html1039"
  HREF="node12.html#SECTION001250000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">5</SPAN> Una breve disgresión sobre los módulos <SPAN  CLASS="textbf">multifichero</SPAN></A>
<LI><A NAME="tex2html1040"
  HREF="node12.html#SECTION001260000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN> Arreglando lo que <SPAN  CLASS="textsf">2to3</SPAN> no puede</A>
<UL>
<LI><A NAME="tex2html1041"
  HREF="node12.html#SECTION001261000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">1</SPAN> <SPAN  CLASS="textsf">False</SPAN> es sintaxis inválida</A>
<LI><A NAME="tex2html1042"
  HREF="node12.html#SECTION001262000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">2</SPAN> No hay ningún módulo denominado <SPAN  CLASS="textsf">constants</SPAN></A>
<LI><A NAME="tex2html1043"
  HREF="node12.html#SECTION001263000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">3</SPAN> El nombre ``file'' no está definido</A>
<LI><A NAME="tex2html1044"
  HREF="node12.html#SECTION001264000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">4</SPAN> No puedes usar un patrón de cadena de texto en un objeto que representa bytes</A>
<LI><A NAME="tex2html1045"
  HREF="node12.html#SECTION001265000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">5</SPAN> No puedo convertir un objeto 'bytes' en <SPAN  CLASS="textsf">str</SPAN> implícitamente</A>
<LI><A NAME="tex2html1046"
  HREF="node12.html#SECTION001266000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">6</SPAN> Tipo del operando no soportado para +: 'int' y 'bytes'</A>
<LI><A NAME="tex2html1047"
  HREF="node12.html#SECTION001267000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">7</SPAN> <SPAN  CLASS="textsf">ord()</SPAN> esperaba una cadena de caracteres de longitud 1, pero encontró un <SPAN  CLASS="textsf">int</SPAN></A>
<LI><A NAME="tex2html1048"
  HREF="node12.html#SECTION001268000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">8</SPAN> Tipos no ordenables: <SPAN  CLASS="textsf">int() &gt;= str()</SPAN></A>
<LI><A NAME="tex2html1049"
  HREF="node12.html#SECTION001269000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">9</SPAN> El nombre global ``<SPAN  CLASS="textsf">reduce</SPAN>'' no está definido</A>
</UL>
<BR>
<LI><A NAME="tex2html1050"
  HREF="node12.html#SECTION001270000000000000000"><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">7</SPAN> Resumen</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION001200000000000000000"></A><A NAME="ch:chardet"></A>
<BR>
<SPAN CLASS="arabic">9</SPAN>. Caso de estudio: migrar chardet a Python 3
</H1>

<P>
Nivel de dificultad:5 sobre 5
<P>
<DIV ALIGN="RIGHT">
</DIV>
<DIV ALIGN="RIGHT"><I>``Palabras, palabras. Son todo lo que tenemos para continuar.'' 
<BR>        --<SPAN  CLASS="textbf">Rosencrantz y Guildenstern han muerto<A NAME="tex2html201"
  HREF="footnode.html#foot17900"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">1</SPAN></SUP></A></SPAN></I>
</DIV>
<P>

<H1><A NAME="SECTION001210000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">1</SPAN> Inmersión</A>
</H1>

<P>
Pregunta: ¿Cuál es la primera causa de texto ininteligible en la web, en tu buzón de entrada, y en cualquier ordenador? Es la codificación de caracteres. En el capítulo <A HREF="node7.html#ch:cadenas">4</A>, sobre las cadenas de caracteres, hablé sobre la historia de la codificación de caracteres y la creación de Unicode, la “codificación de caracteres para gobernarlas a todas”. Me gustaría no volver a ver ningún carácter ininteligible en una página web nunca más, porque todos los sistemas de creación de contenidos almacenaran información precisa sobre la codificación de caracteres; todos los protocolos de transferencia de información fueran conscientes de la existencia de Unicode, y todos los sistemas manejaran el texto con fidelidad al convertirlo entre diferentes codificaciones.

<P>
También me gustaría un pony.

<P>
Un pony de Unicode.

<P>
Un Unipony, podría decir.

<P>
Creo que me decantaré por la detección automática de la codificación de caracteres.

<P>

<H1><A NAME="SECTION001220000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">2</SPAN> ¿En qué consiste la detección automática?</A>
</H1>

<P>
Consiste en tomar una secuencia de bytes con una codificación de caracteres desconocida, e intentar determinar cuál es con el fin de poder leer el texto representado. Es como craquear un código cuando no dispones de la clave de decodificación.

<P>

<H2><A NAME="SECTION001221000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">1</SPAN> ¿Eso no es imposible?</A>
</H2>

<P>
En general: sí. Sin embargo, algunas codificaciones están optimizadas para idiomas específicos, y los idiomas no son aleatorios. Algunas secuencias de caracteres se repiten constantemente, mientras que otras no tienen sentido. Una persona con un inglés fluido que abre un periódico y lee “txzqJv 2!dasd0a QqdKjvz” reconoce instantáneamente que eso no es inglés (incluso aunque esté compuesto de letras ingles). Mediante el estudio de grandes cantidades de texto “típico”, un algoritmo puede simular esta clase de “lectura” fluida y proponer la codificación de caracteres en la que puede encontrar un texto.

<P>
En otras palabras, la detección de la codificación de caracteres es en realidad la detección del idioma, combinada con el conocimiento de las codificaciones de caracteres que tienden a utilizar.

<P>

<H2><A NAME="SECTION001222000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">2</SPAN>.<SPAN CLASS="arabic">2</SPAN> ¿Existe tal algoritmo?</A>
</H2>

<P>
Resulta que sí. Todos los navegadores tienen autodetección de la codificación de caracteres ya que la web está llena de páginas que no tienen ninguna información al respecto. Mozilla Firefox contiene una librería de autodetección de la codificación de caracteres<A NAME="tex2html203"
  HREF="footnode.html#foot17901"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">2</SPAN></SUP></A> que es de código abierto. Yo porté dicha librería a Python 2 bajo el módulo denominado <SPAN  CLASS="textsf">chardet</SPAN>. Este capítulo describe los pasos a través del proceso de conversión del módulo <SPAN  CLASS="textsf">charffdet</SPAN> de Python 2 a Python 3.

<P>

<H1><A NAME="SECTION001230000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN> Introducción al módulo <SPAN  CLASS="textsf">chardet</SPAN></A>
</H1>

<P>
<blockquote>La detección de la codificación de caracteres es en realidad la detección del lenguaje con dificultades.</blockquote>  

<P>
Antes de convertir el código, ayudaría que entendieras cómo funciona. Esta es una guía breve a través del propio código. La librería <SPAN  CLASS="textsf">chardet</SPAN> es demasiado larga para incluirla completa aquí, pero puedes descargarla de <SPAN  CLASS="textsf">chardet.feedparser.org</SPAN><A NAME="tex2html205"
  HREF="footnode.html#foot17903"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN></SUP></A>.

<P>
El punto de entrada principal para el algoritmo de detección es <SPAN  CLASS="textsf">universaldetector.py</SPAN>, que contiene una clase, <SPAN  CLASS="textsf">UniversalDetector</SPAN> <A NAME="tex2html207"
  HREF="footnode.html#foot17904"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">4</SPAN></SUP></A>.

<P>
<SPAN  CLASS="textsf">UniversalDetector</SPAN> puede manejar cinco categorías de codificaciones de caracteres:

<P>

<OL>
<LI><SPAN  CLASS="textsf">UTF-N</SPAN> con <SPAN  CLASS="textsf">BOM</SPAN><A NAME="tex2html208"
  HREF="footnode.html#foot17905"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">5</SPAN></SUP></A>, con las variantes ``Big-Endian'' y ``Little-Endian'' de <SPAN  CLASS="textsf">UTF-16</SPAN>, y todas las variantes de 4-bytes de <SPAN  CLASS="textsf">UTF-16</SPAN>.

<P>
</LI>
<LI>Codificaciones de escape, compatibles con <SPAN  CLASS="textsf">ASCII</SPAN> de 7-bits, 
    en las que los caracteres <SPAN  CLASS="textsf">no-ASCII</SPAN> comienzan con una secuencia de escape. Por ejemplo: <SPAN  CLASS="textsf">ISO-2022-JP</SPAN> (japonés) y <SPAN  CLASS="textsf">HZ-GB-2312</SPAN>(chino).

<P>
</LI>
<LI>Codificaciones multibyte, en las que cada carácter se representa por un número variable de bytes. Por ejemplo: <SPAN  CLASS="textsf">BIG5</SPAN> (chino), <SPAN  CLASS="textsf">SHIFT_JIS</SPAN> (japonés), <SPAN  CLASS="textsf">EUC-KR</SPAN> (coreano), y <SPAN  CLASS="textsf">UTF-8</SPAN> sin <SPAN  CLASS="textsf">BOM</SPAN>.

<P>
</LI>
<LI>Codificaciones de un solo byte, en las que cada carácter se representa por un único byte. Por ejemplo: <SPAN  CLASS="textsf">KOI8-R</SPAN> (ruso), <SPAN  CLASS="textsf">WINDOWS-1255</SPAN> (hebreo), y <SPAN  CLASS="textsf">TIS-620</SPAN> (thai).

<P>
</LI>
<LI><SPAN  CLASS="textsf">WINDOWS-1252</SPAN>, que se utiliza fundamentalmente en Microsoft Windows por los mandos intermedios que no distinguen una codificación de caracteres de un agujero en el suelo.

<P>
</LI>
</OL>

<P>

<H2><A NAME="SECTION001231000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">1</SPAN> <SPAN  CLASS="textsf">UTF-N</SPAN> con <SPAN  CLASS="textsf">BOM</SPAN></A>
</H2>

<P>
Si el texto comienza con una marca <SPAN  CLASS="textsf">BOM</SPAN>, se puede asumir de forma razonable que está codificado en <SPAN  CLASS="textsf">UTF-8</SPAN>, <SPAN  CLASS="textsf">UTF-16</SPAN> o <SPAN  CLASS="textsf">UTF-32</SPAN> (Precisamente el <SPAN  CLASS="textsf">BOM</SPAN> sirve para indicar cuál de ellos es). Esto es manejado por la propia clase <SPAN  CLASS="textsf">UniversalDetector</SPAN>, que retorna el resultado inmediatamente sin proceso adicional.

<P>

<H2><A NAME="SECTION001232000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">2</SPAN> Codificaciones con código de escape</A>
</H2>

<P>
Si el texto contiene una cadena de caracteres de escape reconocible podría indicar que se encuentra en una de las codificaciones que se basan en ello. <SPAN  CLASS="textsf">UniversalDetector</SPAN> crea un objeto <SPAN  CLASS="textsf">EscCharSetProber</SPAN> (definido en el <SPAN  CLASS="textsf">escprober.py</SPAN>) y le pasa el texto.

<P>
<SPAN  CLASS="textsf">ExcCharSetProber</SPAN> crea una serie de máquinas de estado, basadas en los modelos definidos en <SPAN  CLASS="textsf">escsm.py</SPAN>): <SPAN  CLASS="textsf">HZ-GB-2312</SPAN>, <SPAN  CLASS="textsf">ISO-2022-CN</SPAN>, <SPAN  CLASS="textsf">ISO-2022-JP</SPAN>, y <SPAN  CLASS="textsf">ISO-2022-KR</SPAN>. <SPAN  CLASS="textsf">EscCharSetProber</SPAN> alimenta el texto a cada una de las máquinas de estado, byte a byte. Si alguna de ellas finaliza identificando la codificación, <SPAN  CLASS="textsf">EscCharSetProber</SPAN> finaliza devolviendo el resultado a <SPAN  CLASS="textsf">UniversalDetector</SPAN>, que lo retorna al llamante. Si cualquiera de las máquinas de estado alcanza una secuencia ilegal, finaliza su ejecución y se sigue la ejecución con la siguiente máquina de estados.

<P>

<H2><A NAME="SECTION001233000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">3</SPAN> Codificaciones multibyte</A>
</H2>

<P>
Asumiendo que no existe <SPAN  CLASS="textsf">BOM</SPAN>, <SPAN  CLASS="textsf">UniversalDetector</SPAN> chequea si el texto contiene algún carácter con bits altos activados. Si es así, crea una serie de ``sondas'' para detectar codificaciones multibyte, de un byte y, como último recurso, <SPAN  CLASS="textsf">windows-1252</SPAN>.

<P>
La sonda de codificaciones multibyte, <SPAN  CLASS="textsf">MBCSGroupProber</SPAN> (definida en <SPAN  CLASS="textsf">mbcsgroupprober.py</SPAN>), es en realidad un envoltorio que gestiona un grupo de sondas, una para cada tipo de codificación multibyte: <SPAN  CLASS="textsf">BIG5</SPAN>, <SPAN  CLASS="textsf">GB2313</SPAN>, <SPAN  CLASS="textsf">EUC-TW</SPAN>, <SPAN  CLASS="textsf">EUC-KR</SPAN>, <SPAN  CLASS="textsf">EUC-JP</SPAN>, <SPAN  CLASS="textsf">SHIFT_JIS</SPAN>, y <SPAN  CLASS="textsf">UTF-8</SPAN>. <SPAN  CLASS="textsf">MBCSGroupProber</SPAN> alimenta el texto a cada una de las sondas específicas y chequea el resultado. Si una sonda reporta una secuencia de bytes ilegal, se elimina de la búsqueda (cualquier llamada posterior a <SPAN  CLASS="textsf">UniversalDetector.feed()</SPAN> para este texto se saltará a esta sonda). Si una sonda informa que está segura razonablemente de que ha detectado la codificación, <SPAN  CLASS="textsf">MBCSGroupProber</SPAN> informa del resultado positivo a <SPAN  CLASS="textsf">UniversalDetector</SPAN>, que devuelve el resultado al llamante.

<P>
La mayoría de las sondas de la codificación multibyte heredan de <SPAN  CLASS="textsf">MultiByteCharSetProber</SPAN> (definida en <SPAN  CLASS="textsf">mbcharsetprober.py</SPAN>, y simplemente activan la máquina de estados y analizador de distribución apropiado y dejan a la clase <SPAN  CLASS="textsf">MultiByteCharSetProber</SPAN> hacer el resto del trabajo. <SPAN  CLASS="textsf">MultiByteCharSetProber</SPAN> recorre el texto a traves de la máquina de estados específica byte a byte, para buscar secuencias de caracteres que pudieran indicar de forma concluyente un resultado positivo o negativo. Al mismo tiempo, <SPAN  CLASS="textsf">MultiByteCharSetProber</SPAN> alimenta el texto a un analizador de distribución específico de cada codificación de caracteres.

<P>
Los analizadores de distribución (definidos en <SPAN  CLASS="textsf">chardistribution.py</SPAN>) utilizan modelos específicos para cada idioma que tienen en cuenta los caracteres más frecuentes en cada uno de ellos. Cuando <SPAN  CLASS="textsf">MultiByteCharSetProber</SPAN> ha alimentado suficiente texto a los analizadores, calcula el grado de confianza basándose en el número de caracteres más frecuentes, el número total de caracteres, y el ratio de distribución específico de cada lenguaje. Si el grado de confianza es suficientemente algo, <SPAN  CLASS="textsf">MultiByteCharSetProber</SPAN> devuelve el resultado a <SPAN  CLASS="textsf">MBCSGroupProber</SPAN>, que lo devuelve a <SPAN  CLASS="textsf">UniversalDetector</SPAN>, quien, a su vez, lo devuelve al llamante.

<P>
El caso del idioma Japonés es más difícil. Un análisis de distribución monocarácter no es siempre suficiente para distinguir entre <SPAN  CLASS="textsf">EUC-JP</SPAN> y <SPAN  CLASS="textsf">SHIFT_JIS</SPAN>, por ello la sonda <SPAN  CLASS="textsf">SJISProber</SPAN> (definida en <SPAN  CLASS="textsf">sjisprober.py</SPAN> también utiliza un análisis de distribución de dos caracteres. <SPAN  CLASS="textsf">SJISContextAnalysis</SPAN> y <SPAN  CLASS="textsf">EUCJPContextAnalysis</SPAN> (ambos definidos en <SPAN  CLASS="textsf">jpcntx.py</SPAN>) comprueban la frecuencia en el texto de los caracteres del silabario Hiragana. Cuando se ha procesado texto suficiente, devuelven el grado de confianza a <SPAN  CLASS="textsf">SJISProber</SPAN>, que chequea ambos analizadores y devuelve aquél de mayor grado de confianza a <SPAN  CLASS="textsf">MBCSGroupProber</SPAN>.

<P>

<H2><A NAME="SECTION001234000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">4</SPAN> Codificaciones de un solo byte</A>
</H2>

<P>
<blockquote>En serio, dónde está mi pony unicode</blockquote>  

<P>
La sonda de codificaciones de un solo byte, <SPAN  CLASS="textsf">SBCSGroupProber</SPAN> (definida en <SPAN  CLASS="textsf">sbcsgroupprober.py</SPAN>), también es un envoltorio que gestiona el grupo de sondas que existen para cada combinación de idioma y codificación de un solo byte: <SPAN  CLASS="textsf">windows-1251</SPAN>, <SPAN  CLASS="textsf">KOI8-R</SPAN>, <SPAN  CLASS="textsf">ISO-8859-5</SPAN>, <SPAN  CLASS="textsf">MacCyrillic</SPAN>, <SPAN  CLASS="textsf">IBM855</SPAN>, y <SPAN  CLASS="textsf">IBM866</SPAN> (ruso); <SPAN  CLASS="textsf">ISO-8859-7</SPAN> y <SPAN  CLASS="textsf">windows-1253</SPAN> (griego); <SPAN  CLASS="textsf">ISO-8859-5</SPAN> y <SPAN  CLASS="textsf">windows-1251</SPAN> (búlgaro); <SPAN  CLASS="textsf">ISO-8859-2</SPAN> y <SPAN  CLASS="textsf">windows-1250</SPAN> (húngaro); <SPAN  CLASS="textsf">TIS-620</SPAN> (Thai); <SPAN  CLASS="textsf">windows-1255</SPAN> e <SPAN  CLASS="textsf">ISO-8859-8</SPAN> (Hebreo).

<P>
<SPAN  CLASS="textsf">SBCSGroupProber</SPAN> alimenta el texto a cada uno de estas sondas específicas y comprueba sus resultados. Las sondas están implementadas con un única clase <SPAN  CLASS="textsf">SingleByteCharSetProber</SPAN> (definida en <SPAN  CLASS="textsf">sbcharsetprober.py</SPAN>, que utiliza como parámetro del constructor el modelo del idioma. Este define la frecuencia de aparición de las diferentes secuencias de dos caracteres en un texto típico. <SPAN  CLASS="textsf">SingleByteByteCharSetProber</SPAN> procesa el texto contando las secuencias de dos caracteres más frecuentes. Cuando se ha procesado suficiente texto, calcula el nivel de confianza basado en el número de dichas secuencias, el número total de caracteres, y la distribución específica del idioma.

<P>
El hebreo se maneja como un caso especial. Si el texto parece hebreo, basado en el análisis de distribución de dos caracteres, <SPAN  CLASS="textsf">HebrewProber</SPAN> (definido en <SPAN  CLASS="textsf">hebrewprober.py</SPAN> intenta distinguir entre hebreo visual (en el que el texto está realmente almacenado ``hacia atrás'' línea a línea, y luego se muestra directamente para que pueda leerse de derecha a izquierda) y hebreo lógico (en el que el texto se almacena en el orden de lectura y luego se visualiza de derecha a izquierda por el sistema). Debido a que ciertos caracteres se codifican de forma diferente en función de que aparezcan en medio de una palabra o al final, podemos intentar adivinar de forma razonable la dirección del texto fuente, y devolver la codificación correcta (<SPAN  CLASS="textsf">windows-1255</SPAN> en el caso de hebreo lógico, o <SPAN  CLASS="textsf">ISO-8859-8</SPAN> para el hebreo visual).

<P>

<H2><A NAME="SECTION001235000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">3</SPAN>.<SPAN CLASS="arabic">5</SPAN> windows-1252</A>
</H2>

<P>
Si <SPAN  CLASS="textsf">UniversalDetector</SPAN> encuentra en el texto un carácter con el bit alto activado, pero ninguno de las sondas anteriores devuelve un resultado fiable, crea un objeto <SPAN  CLASS="textsf">Latin1Prober</SPAN> (definido en <SPAN  CLASS="textsf">latin1prober.py</SPAN>) para intentar detectar texto en inglés en una codificación <SPAN  CLASS="textsf">windows-1252</SPAN>. Esta no es fiable (inherentemente), porque las letras en inglés se codifican de la misma forma en diferentes codificaciones. La única forma de distinguir <SPAN  CLASS="textsf">windows-1252</SPAN> es a través de algunos símbolos comúnmente utilizados como las comillas inteligentes, los apóstrofos, símbolos de copyright, y otros similares. <SPAN  CLASS="textsf">Latin1Prober</SPAN> reduce su estimación del nivel de confianza para permitir que le ``ganen'' otras sondas más precisas, si es posible.

<P>

<H1><A NAME="SECTION001240000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">4</SPAN> Ejecutando <SPAN  CLASS="textsf">2to3</SPAN></A>
</H1>

<P>
Vamos a migrar el módulo <SPAN  CLASS="textsf">chardet</SPAN> de Python 2 a Python 3. Este último trae una utilidad denominada <SPAN  CLASS="textsf">2to3</SPAN>, que toma el código fuente de Python 2 como entrada y lo convierte de forma automática a Python 3. En algunos casos es fácil --Cambiar una función de librería que fue renombrada o movida a otro módulo--, pero en otros casos puede ser muy complejo. Para entender lo que puede llegar a hacer, lee el apéndice <A HREF="node14.html#ch:migcod">A</A>, Migrando código a Python 3 con <SPAN  CLASS="textsf">2to3</SPAN>. En este capítulo comenzaremos ejecutando <SPAN  CLASS="textsf">2to3</SPAN> en el paquete <SPAN  CLASS="textsf">chardet</SPAN>, verás que aún quedará bastante trabajo que hacer después de que las herramientas automatizadas hayan aplicado su magia.

<P>
El paquete <SPAN  CLASS="textsf">chardet</SPAN> está dividido en varios ficheros, todos en el mismo directorio. El script <SPAN  CLASS="textsf">2to3</SPAN> facilita la conversión de varios ficheros a la vez: basta con pasarle el nombre del directorio como parámetro y <SPAN  CLASS="textsf">2to3</SPAN> convertirá cada uno de los ficheros que contenga.

<P>
<pre>
[escapeinside=(**)]
C:&gt; python c:30to3.py -w chardet RefactoringTool: Skipping implicit fixer: buffer
RefactoringTool: Skipping implicit fixer: idioms
RefactoringTool: Skipping implicit fixer: set_literal
RefactoringTool: Skipping implicit fixer: ws_comma
-- chardet__init__.py (original)
+++ chardet__init__.py (refactored)
@@ -18,7 +18,7 @@
 __version__ = "1.0.1"

<P>
def detect(aBuf):
(* 
<FONT COLOR="#ff0000">-    import universaldetector *)
(* 
<FONT COLOR="#000000">+    from . import universaldetector *)
     u = universaldetector.UniversalDetector()
     u.reset()
     u.feed(aBuf)
-- chardet5prober.py (original)
+++ chardet&#92;big5prober.py (refactored)
@@ -25,10 +25,10 @@
 # 02110-1301  USA
 ######################### END LICENSE BLOCK #########################
</FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#">(* 
<FONT COLOR="#ff0000">-from mbcharsetprober import MultiByteCharSetProber *)
(* 
<FONT COLOR="#ff0000">-from codingstatemachine import CodingStateMachine *)
(* 
<FONT COLOR="#ff0000">-from chardistribution import Big5DistributionAnalysis *)
(* 
<FONT COLOR="#ff0000">-from mbcssm import Big5SMModel *)
(* 
<FONT COLOR="#000000">+from .mbcharsetprober import MultiByteCharSetProber *)
(* 
<FONT COLOR="#000000">+from .codingstatemachine import CodingStateMachine *)
(* 
<FONT COLOR="#000000">+from .chardistribution import Big5DistributionAnalysis *)
(* 
<FONT COLOR="#000000">+from .mbcssm import Big5SMModel *)
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">class Big5Prober(MultiByteCharSetProber):
     def __init__(self):
-- chardet.py (original)
+++ chardet.py (refactored)
@@ -25,12 +25,12 @@
 # 02110-1301  USA
 ######################### END LICENSE BLOCK #########################
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">(* 
<FONT COLOR="#ff0000">-import constants *)
(* 
<FONT COLOR="#ff0000">-from euctwfreq import EUCTWCharToFreqOrder,  *)
(* 
<FONT COLOR="#ff0000">      EUCTW_TABLE_SIZE, EUCTW_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#ff0000">-from euckrfreq import EUCKRCharToFreqOrder, *)
(* 
<FONT COLOR="#ff0000">      EUCKR_TABLE_SIZE, EUCKR_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#ff0000">-from gb2312freq import GB2312CharToFreqOrder, *)
(* 
<FONT COLOR="#ff0000">      GB2312_TABLE_SIZE, GB2312_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#ff0000">-from big5freq import Big5CharToFreqOrder, *)
(* 
<FONT COLOR="#ff0000">      BIG5_TABLE_SIZE, BIG5_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#ff0000">-from jisfreq import JISCharToFreqOrder, *)
(* 
<FONT COLOR="#ff0000">      JIS_TABLE_SIZE, JIS_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#000000">+from . import constants *)
(* 
<FONT COLOR="#000000">+from .euctwfreq import EUCTWCharToFreqOrder, *)
(* 
<FONT COLOR="#000000">      EUCTW_TABLE_SIZE, EUCTW_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#000000">+from .euckrfreq import EUCKRCharToFreqOrder, *)
(* 
<FONT COLOR="#000000">      EUCKR_TABLE_SIZE, EUCKR_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#000000">+from .gb2312freq import GB2312CharToFreqOrder, *)
(* 
<FONT COLOR="#000000">      GB2312_TABLE_SIZE, GB2312_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#000000">+from .big5freq import Big5CharToFreqOrder,  *)
(* 
<FONT COLOR="#000000">      BIG5_TABLE_SIZE, BIG5_TYPICAL_DISTRIBUTION_RATIO *)
(* 
<FONT COLOR="#000000">+from .jisfreq import JISCharToFreqOrder,  *)
(* 
<FONT COLOR="#000000">      JIS_TABLE_SIZE, JIS_TYPICAL_DISTRIBUTION_RATIO *)
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">ENOUGH_DATA_THRESHOLD = 1024
 SURE_YES = 0.99
.
.
(* 
<FONT COLOR="#000000">. (Durante un rato va sacando mensajes de este tipo) *)
.
.
RefactoringTool: Files that were modified:
RefactoringTool: chardet__init__.py
RefactoringTool: chardet5prober.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet2312prober.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet1prober.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet.py
RefactoringTool: chardet8prober.py
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">Now run the 2to3 script on the testing harness, test.py.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">C:&gt; python c:30to3.py -w test.py
RefactoringTool: Skipping implicit fixer: buffer
RefactoringTool: Skipping implicit fixer: idioms
RefactoringTool: Skipping implicit fixer: set_literal
RefactoringTool: Skipping implicit fixer: ws_comma
-- test.py (original)
+++ test.py (refactored)
@@ -4,7 +4,7 @@
 count = 0
 u = UniversalDetector()
 for f in glob.glob(sys.argv[1]):
(* 
<FONT COLOR="#ff0000">-    print f.ljust(60), *)
(* 
<FONT COLOR="#000000">+    print(f.ljust(60), end=' ') *)
     u.reset()
     for line in file(f, 'rb'):
         u.feed(line)
@@ -12,8 +12,8 @@
     u.close()
     result = u.result
     if result['encoding']:
(* 
<FONT COLOR="#ff0000">-        print result['encoding'], 'with confidence', result['confidence'] *)
(* 
<FONT COLOR="#000000">+        print(result['encoding'], 'with confidence', result['confidence']) *)
     else:
(* 
<FONT COLOR="#ff0000">-        print '******** no result' *)
(* 
<FONT COLOR="#000000">+        print('******** no result') *)
     count += 1
(* 
<FONT COLOR="#ff0000">-print count, 'tests' *)
(* 
<FONT COLOR="#000000">+print(count, 'tests') *)
RefactoringTool: Files that were modified:
RefactoringTool: test.py</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Bueno, no fue para tanto. Solo se han convertido unos pocos imports y sentencias print. Por cierto, cuál era el problema con todas las sentencias import. Para contestar a esto, tienes que entender que el módulo <SPAN  CLASS="textsf">chardet</SPAN> estaba dividido en múltiples ficheros.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H1><A NAME="SECTION001250000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">5</SPAN> Una breve disgresión sobre los módulos <SPAN  CLASS="textbf">multifichero</SPAN></A>
</H1><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><SPAN  CLASS="textsf">chardet</SPAN> es un módulo multifichero. Podría haber elegido poner todo el código en uno solo (denominado <SPAN  CLASS="textsf">chardet.py</SPAN>, pero no lo hice. En vez de eso, creé un directorio (denominado <SPAN  CLASS="textsf">chardet</SPAN>), luego creé un fichero <SPAN  CLASS="textsf">__init__.py</SPAN> en él, <SPAN  CLASS="textbf">con ello se asume que todos los ficheros de este directorio son parte del mismo módulo</SPAN>. El nombre del módulo es el nombre del directorio. Los ficheros que están dentro del directorio pueden referenciar a otros ficheros dentro del mismo, o incluso en subdirectorios (más sobre esto en un minuto). Pero la colección completa de ficheros se presenta para otro código de Python como un único módulo --como si las funciones y las clases se encontrasen un único fichero de extensión <SPAN  CLASS="textsf">.py</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¿Qué contiene el fichero <SPAN  CLASS="textsf">__init__.py</SPAN>? Nada. Todo. Algo intermedio. El fichero <SPAN  CLASS="textsf">__init__.py</SPAN> no necesita definir nada. Puede ser un fichero vacío. Pero también se puede utilizar para definir en él las funciones que sean punto de entrada a tu módulo. O puedes poner todas las funciones en él. O todas, salvo una...
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><blockquote>Un directorio con un fichero <SPAN  CLASS="textsf">__init__.py</SPAN> siempre se trata como un módulo multifichero. Sin un fichero <SPAN  CLASS="textsf">__init__.py</SPAN>, un directorio no contiene más que un conjunto de ficheros <SPAN  CLASS="textsf">.py</SPAN> sin relación alguna</blockquote>  
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Veamos como funciona esto en la práctica.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
&#187;&gt; import chardet
&#187;&gt; dir(chardet)
['__builtins__', '__doc__', '__file__', '__name__',
 '__package__', '__path__', '__version__', 'detect']
&#187;&gt; chardet
&lt;module 'chardet' from 'C:31-packages__init__.py'&gt;</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<OL>
<LI><SPAN  CLASS="textbf">Línea 2:</SPAN> aparte de los atributos de clase habituales, lo único que hay en el módulo <SPAN  CLASS="textsf">chardet</SPAN> es la función <SPAN  CLASS="textsf">detect()</SPAN>.
</LI>
<LI><SPAN  CLASS="textbf">Línea 5:</SPAN> aquí aparece la primera pista de que el módulo <SPAN  CLASS="textsf">chardet</SPAN> está formado por más de un fichero; el ``módulo'' se muestra como procedente del fichero <SPAN  CLASS="textsf">__init__.py</SPAN> del directorio <SPAN  CLASS="textsf">chardet/</SPAN>.
</LI>
</OL><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Veamos el contenido del fichero <SPAN  CLASS="textsf">__init__.py</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
def detect(aBuf):                              
    from . import universaldetector            
    u = universaldetector.UniversalDetector()
    u.reset()
    u.feed(aBuf)
    u.close()
    return u.result</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<OL>
<LI><SPAN  CLASS="textbf">Línea 1:</SPAN> El fichero define la función <SPAN  CLASS="textsf">detect()</SPAN>, que es el punto de entrada principal del módulo <SPAN  CLASS="textsf">chardet</SPAN>.
</LI>
<LI><SPAN  CLASS="textbf">Línea 2:</SPAN> Esta función tiene poquísimo código. En realidad, todo lo que hace es importar el módulo <SPAN  CLASS="textsf">universaldetector</SPAN> y comenzar a usarlo. ¿Pero dónde está definido <SPAN  CLASS="textsf">universaldetector</SPAN>?
</LI>
</OL><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">La respuesta se encuentra en esa extraña sentencia <SPAN  CLASS="textsf">import</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
from . import universaldetector</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Traducido, significa que ``se importe el módulo <SPAN  CLASS="textsf">universaldetector</SPAN>; que está en el mismo directorio en el que estoy yo (el fichero <SPAN  CLASS="textsf">chardet/__init__.py</SPAN>)''. A esto se le denomina <SPAN  CLASS="textbf">importación relativa</SPAN>. Es la forma en que se localizan entre sí los ficheros que se encuentran en un módulo multifichero, sin preocuparse de conflictos de denominación con otros módulos que puedas haber instalado en tu <SPAN  CLASS="textbf">camino de búsqueda de módulos</SPAN><A NAME="tex2html209"
  HREF="footnode.html#foot17910"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN></SUP></A>. Esta sentencia <SPAN  CLASS="textsf">import</SPAN> solamente buscará a <SPAN  CLASS="textsf">universaldetector</SPAN> dentro del propio directorio <SPAN  CLASS="textsf">chardet</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Estos dos conceptos --<SPAN  CLASS="textsf">__init__.py</SPAN> e importación relativa-- permiten que puedas dividir un módulo en las piezas que quieras. El módulo <SPAN  CLASS="textsf">chardet</SPAN> consta de 36 ficheros <SPAN  CLASS="textsf">.py</SPAN>, ¡36!. Aún así, para utilizarlo únicamente necesitas usar <SPAN  CLASS="textsf">import chardet</SPAN>, y luego llamar a la función <SPAN  CLASS="textsf">chardet.detect()</SPAN>. Para tu código es transparente dónde está definida la función, si utiliza una importación relativa de <SPAN  CLASS="textsf">universaldetector</SPAN> y que este, a su vez, utiliza cinco importaciones relativas de otros tantos ficheros, todos contenidos en el directorio <SPAN  CLASS="textsf">chardet/</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><blockquote>Si alguna vez te encuentras en la necesidad de escribir una librería grande en Python (o más probablemente, cuando te des cuenta de que tu pequeña librería ha crecido hasta convertirse en grande), tómate tu tiempo en refactorizarla en un módulo multifichero. Es una de las muchas cosas en las que Python es muy bueno, así que aprovéchate de ello.</blockquote>  
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H1><A NAME="SECTION001260000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN> Arreglando lo que <SPAN  CLASS="textsf">2to3</SPAN> no puede</A>
</H1><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001261000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">1</SPAN> <SPAN  CLASS="textsf">False</SPAN> es sintaxis inválida</A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><blockquote>¿Tienes pruebas? ¿No?</blockquote>  
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Ahora vamos a las pruebas reales: ejecutar la suite de pruebas. Puesto que la suite de pruebas esta diseñada para cubrir todos los caminos posibles del código, es una buena manera de probar el código migrado para estar seguro de que no hay errores acechando en algún rincón.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
Traceback (most recent call last):
  File "test.py", line 1, in &lt;module&gt;
    from chardet.universaldetector import UniversalDetector
  File "C:.py", line 51
    self.done = constants.False
                              ^
SyntaxError: invalid syntax</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Vaya, un pequeño fallo. En Python 3, <SPAN  CLASS="textsf">False</SPAN> es una palabra reservada, así que no la puedes utilizar como nombre de una variable. Vamos a mirar <SPAN  CLASS="textsf">constants.py</SPAN> para ver dónde está definida. Aquí está la versión original del fichero antes de que <SPAN  CLASS="textsf">2to3</SPAN> lo cambiara:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
import __builtin__
if not hasattr(__builtin__, 'False'):
    False = 0
    True = 1
else:
    False = __builtin__.False
    True = __builtin__.True</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Este código está diseñado para que funcione con versiones antiguas de Python 2. Antes de Python 2.3 no existía el tipo <SPAN  CLASS="textsf">bool</SPAN>. El código detecta la ausencia de las constantes <SPAN  CLASS="textsf">True</SPAN> y <SPAN  CLASS="textsf">False</SPAN> y las define si es necesario.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Sin embargo, en Python 3 siempre existe el tipo <SPAN  CLASS="textsf">bool</SPAN>, por lo que este código es innecesario. La solución más simple pasa por sustituir todas las instancias de <SPAN  CLASS="textsf">constants.True</SPAN> y <SPAN  CLASS="textsf">constants.False</SPAN> por <SPAN  CLASS="textsf">True</SPAN> y <SPAN  CLASS="textsf">False</SPAN>, respectivamente. Y borrar este fichero.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Así, esta línea del fichero <SPAN  CLASS="textsf">universaldetector.py</SPAN>:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
self.done = constants.False</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Se convierte en:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
self.done = False</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¡Ah! ¿No es satisfactorio? El código queda más corto y más legible así.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001262000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">2</SPAN> No hay ningún módulo denominado <SPAN  CLASS="textsf">constants</SPAN></A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Hora de volver a ejecutar <SPAN  CLASS="textsf">test.py</SPAN> y ver hasta donde llega.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
Traceback (most recent call last):
  File "test.py", line 1, in &lt;module&gt;
    from chardet.universaldetector import UniversalDetector
  File "C:.py", line 29, in &lt;module&gt;
    import constants, sys
ImportError: No module named constants</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¿Qué dices? ¿Que no hay un módulo denominado <SPAN  CLASS="textsf">constants</SPAN>? Desde luego que sí. Está ahí mismo, en <SPAN  CLASS="textsf">chardet/constants.py</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¿Recuerdas que el comando <SPAN  CLASS="textsf">2to3</SPAN> arregló muchas sentencias <SPAN  CLASS="textsf">import</SPAN>? Esta librería tiene muchas importaciones relativas --esto es, módulos que importan a otros módulos dentro de la misma librería-- pero la lógica que gobierna las mismas ha cambiado en Python 3. En Python 2, podías escribir <SPAN  CLASS="textsf">import constants</SPAN> y el primer lugar en el que se busca es en el directorio <SPAN  CLASS="textsf">chardet/</SPAN>. En Python 3, todas las sentencias <SPAN  CLASS="textsf">import</SPAN> son absolutas por defecto. Si quieres una relativa hay que ser explícito:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
from . import constants</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Pero espera, ¿No se supone que <SPAN  CLASS="textsf">2to3</SPAN> tenía que haber resuelto esto por ti? Bueno, lo hizo, pero esta sentencia en particular (<SPAN  CLASS="textsf">import constants, sys</SPAN>) combina dos tipos diferentes de importación en una única línea: una relativa, el módulo <SPAN  CLASS="textsf">constants</SPAN>; y una absoluta, el módulo <SPAN  CLASS="textsf">sys</SPAN> que está preinstalado en la librería estándar de Python. En Python 2, podías combinar ambas en una única sentencia. En Python 3 no puedes. Además, el comando <SPAN  CLASS="textsf">2to3</SPAN> no es lo suficientemente inteligente como para dividir esta sentencia en dos.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">La solución consiste en dividir la sentencia manualmente:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
import constants, sys</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Se debe transformar en:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
from . import constants
import sys</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Hay diversas variaciones de este problema repartidas a lo largo de la librería <SPAN  CLASS="textsf">chardet</SPAN>. En algunos lugares es ``<SPAN  CLASS="textsf">import constants, sys</SPAN>''; en otros, es ``<SPAN  CLASS="textsf">import constants, re</SPAN>''. El arreglo siempre es igual: dividir manualmente esta sentencia en dos: una para la importación relativa, la otra para la importación absoluta.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¡Sigamos!
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001263000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">3</SPAN> El nombre ``file'' no está definido</A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Y aquí vamos de nuevo, ejecutamos <SPAN  CLASS="textsf">test.py</SPAN> para ver qué sucede con los casos de prueba...
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml
Traceback (most recent call last):
  File "test.py", line 9, in &lt;module&gt;
    for line in file(f, 'rb'):
NameError: name 'file' is not defined</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><blockquote><SPAN  CLASS="textsf">open()</SPAN> es el nuevo <SPAN  CLASS="textsf">file()</SPAN>. PapayaWhip es el nuevo negro</blockquote>  
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Esta me sorprendió, porque he estado utilizando <SPAN  CLASS="textsf">file()</SPAN> desde que tengo memoria. En Python 2, la función global <SPAN  CLASS="textsf">file()</SPAN> es un alias de la función <SPAN  CLASS="textsf">open()</SPAN>, que es el modo estándar de abrir ficheros de lectura<A NAME="tex2html210"
  HREF="footnode.html#foot17915"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">7</SPAN></SUP></A>. En Python 3, no existe la función global <SPAN  CLASS="textsf">file()</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">La solución más simple de este problema es sustituir la llamada a la función <SPAN  CLASS="textsf">file</SPAN> por <SPAN  CLASS="textsf">open</SPAN>:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
for line in open(f, 'rb'):</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Y eso es todo lo que tengo que decir sobre este tema.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001264000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">4</SPAN> No puedes usar un patrón de cadena de texto en un objeto que representa bytes</A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Las cosas comienzan a ponerse interesante. Y por ``interesante'' quiero decir ``confusas como el infierno''.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml
Traceback (most recent call last):
  File "test.py", line 10, in &lt;module&gt;
    u.feed(line)
  File "C:.py", line 98, in feed
    if self._highBitDetector.search(aBuf):
TypeError: can't use a string pattern on a bytes-like object</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Para depurar esto veamos lo que es <SPAN  CLASS="textsf">self._highBitDetector</SPAN>. Está definido en el método <SPAN  CLASS="textsf">__init__</SPAN> de la clase <SPAN  CLASS="textsf">UniversalDetector</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
class UniversalDetector:
    def __init__(self):
        self._highBitDetector = re.compile(r'[80-]')</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Esto precompila una expresión regular diseñada para encontrar caracteres no ASCII que se encuentren en el rango 128-255 (0x80-0xFF). Espera, esto no es del todo cierto, necesito ser más preciso con mi terminología. Este patrón está diseñado para encontrar <SPAN  CLASS="textbf">bytes</SPAN> no ASCII en el rango 128-255.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Y ese es el problema.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">En Python 2, una cadena de texto era un array de bytes cuya codificación de caracteres se mantenía separadamente. Si querías conservar la codificación de caracteres, en su lugar tenías que utilizar una cadena de caracteres Unicode (u''). Pero en Python 3 una cadena de caracteres siempre es lo que Python 2 llamaba una cadena de caracteres Unicode --esto es, un array de caracteres Unicode (de un número de bytes posiblemente variable). Como esta expresión regular está definida por un patrón de cadena de caracteres, solo puede utilizarse para buscar en cadenas de caracteres-- es decir, un array de caracteres. Pero lo que estamos buscando no es un cadena de caracteres, es un array de bytes. Si observamos la traza del error, este sucede en <SPAN  CLASS="textsf">universaldetector.py</SPAN>:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
def feed(self, aBuf):
    .
    .
    .
    if self._mInputState == ePureAscii:
        if self._highBitDetector.search(aBuf):</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¿Y qué es un <SPAN  CLASS="textsf">aBuf</SPAN>? Vamos un poco más atrás a un lugar que llame a <SPAN  CLASS="textsf">UniversalDetector.feed()</SPAN>. La prueba <SPAN  CLASS="textsf">test.py</SPAN> lo hace:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
u = UniversalDetector()
.
.
.
for line in open(f, 'rb'):
    u.feed(line)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Y aquí encontramos nuestra respuesta: la variable <SPAN  CLASS="textsf">aBuf</SPAN> del método <SPAN  CLASS="textsf">UniversalDetector.feed()</SPAN> contiene una línea leída de un fichero del disco. Observa que los parámetros utilizados para su apertura son 'rb'. 'r' es para que sea de lectura; y 'b' es para indicar 'binario'. Sin este último parámetro, este bucle <SPAN  CLASS="textsf">for</SPAN> podría leer el fichero, línea por línea, y convertir cada una de ellas en una cadena de caracteres --un array de caracteres Unicode-- de acuerdo a la codificación de caracteres por defecto del sistema. Pero con el parámetro 'b', este bucle <SPAN  CLASS="textsf">for</SPAN> lee el fichero, línea a línea y almacena cada una de ellas exactamente como aparecen en el fichero, como un array de bytes. Ese array de bytes se pasa a <SPAN  CLASS="textsf">UniversalDetector.feed()</SPAN> y, llegado el momento, se le pasa a la expresión regular precompilada, <SPAN  CLASS="textsf">self._highBitDetector</SPAN>, con el fin de buscar caracteres con el bit alto activado...Pero no tenemos caracteres, tenemos bytes. ¡Subir as!
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Necesitamos que esta expresión regular busque en un array de bytes, no de caracteres.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Una vez nos damos cuenta de ello, la solución no es difícil. Las expresiones regulares definidas con cadenas de caracteres buscan en cadenas de caracteres. Las expresiones regulares definidas con un array de bytes buscan en arrays de bytes. Para definir un patrón como un array de bytes, simplemente modificamos el tipo del argumento que usamos para definir la expresión regular:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
[escapeinside=(**)]
  class UniversalDetector:
      def __init__(self):
(* 
<FONT COLOR="#ff0000">-         self._highBitDetector = re.compile(r'[&#92;x80-&#92;xFF]') *)
(* 
<FONT COLOR="#ff0000">-         self._escDetector = re.compile(r'(&#92;033|&nbsp;)') *)
(* 
<FONT COLOR="#000000">+         self._highBitDetector = re.compile(b'[&#92;x80-&#92;xFF]') *)
(* 
<FONT COLOR="#000000">+         self._escDetector = re.compile(b'(&#92;033|&nbsp;)') *)
          self._mEscCharSetProber = None
          self._mCharSetProbers = []
          self.reset()</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#">La búsqueda de todo el código para localizar otros usos del módulo <SPAN  CLASS="textsf">re</SPAN> encuentra dos sitios más, ambos en <SPAN  CLASS="textsf">charsetprober.py</SPAN>. De nuevo, el código define las expresiones regulares como cadenas de caracteres pero las está ejecutando sobre <SPAN  CLASS="textsf">aBuf</SPAN>, que es un array de bytes. La solución es la misma: definir los patrones de la expresión regular como un array de bytes.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><pre>
[escapeinside=(**)]
  class CharSetProber:
      .
      .
      .
      def filter_high_bit_only(self, aBuf):
(* 
<FONT COLOR="#ff0000">-         aBuf = re.sub(r'([&#92;x00-&#92;x7F])+', ' ', aBuf) *)
(* 
<FONT COLOR="#000000">+         aBuf = re.sub(b'([&#92;x00-&#92;x7F])+', b' ', aBuf) *)
          return aBuf
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">def filter_without_english_letters(self, aBuf):
(* 
<FONT COLOR="#ff0000">-         aBuf = re.sub(r'([A-Za-z])+', ' ', aBuf) *)
(* 
<FONT COLOR="#000000">+         aBuf = re.sub(b'([A-Za-z])+', b' ', aBuf) *)
          return aBuf</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001265000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">5</SPAN> No puedo convertir un objeto 'bytes' en <SPAN  CLASS="textsf">str</SPAN> implícitamente</A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¡Curioso y requetecurioso!
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml
Traceback (most recent call last):
  File "test.py", line 10, in &lt;module&gt;
    u.feed(line)
  File "C:.py", line 100, in feed
    elif (self._mInputState == ePureAscii) and self._escDetector.search(self._mLastChar + aBuf):
TypeError: Can't convert 'bytes' object to str implicitly</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">En este caso existe un desafortunado choque entre el estilo de codificación y el intérprete de Python. El <SPAN  CLASS="textsf">TypeError</SPAN> podría estar en cualquier lugar de la línea, pero la traza no dice exactamente dónde está. Podría ser en la primera condición o en la segunda. Para acotarlo, deberías dividir la línea en dos, así:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
elif (self._mInputState == ePureAscii) and      self._escDetector.search(self._mLastChar + aBuf):</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Ejecutar de nuevo el test:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml
Traceback (most recent call last):
  File "test.py", line 10, in &lt;module&gt;
    u.feed(line)
  File "C:.py", line 101, in feed
    self._escDetector.search(self._mLastChar + aBuf):
TypeError: Can't convert 'bytes' object to str implicitly</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¡Ajá! El problema no estaba  en la primera parte de la condición (<SPAN  CLASS="textsf">self._mInputState == ePureAscii</SPAN>) sino en la segunda. ¿Qué ha podido causar el error? Quizás pienses que el método <SPAN  CLASS="textsf">search()</SPAN> está esperando un valor de un tipo diferente, pero eso no generaría esta traza. Las funciones de Python pueden tomar cualquier valor; si pasas el número correcto de parámetros, la función se ejecutará. Puede <SPAN  CLASS="textbf">cascar</SPAN> si le pasas un valor de un tipo diferente el que esté esperando, pero si eso sucediera, la traza apuntaría a algún lugar interno de la función. Esta traza, sin embargo, dice que ni siquiera a podido llamar al método <SPAN  CLASS="textsf">search()</SPAN>. Así que el problema debe estar en la operación <SPAN  CLASS="textsf">+</SPAN>, cuando intenta construir el valor que posteriormente deberá pasarse a <SPAN  CLASS="textsf">search()</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Sabemos por la depuración anterior que <SPAN  CLASS="textsf">aBuf</SPAN> es un array de bytes. Pero ¿qué contiene <SPAN  CLASS="textsf">self._mLastChar</SPAN>? Es una variable de instancia, definida en el método <SPAN  CLASS="textsf">reset()</SPAN>, que se llama desde el método <SPAN  CLASS="textsf">__init__()</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
class UniversalDetector:
    def __init__(self):
        self._highBitDetector = re.compile(b'[80-]')
        self._escDetector = re.compile(b'(33|&nbsp;)')
        self._mEscCharSetProber = None
        self._mCharSetProbers = []
        (* 
<FONT COLOR="#000000"> self.reset() *)
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#">def reset(self):
        self.result = 'encoding': None, 'confidence': 0.0
        self.done = False
        self._mStart = True
        self._mGotData = False
        self._mInputState = ePureAscii
        (* 
<FONT COLOR="#000000"> self._mLastChar = '' *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">Y ya tenemos nuestra respuesta. ¿La ves? <SPAN  CLASS="textsf">self._mLastChar</SPAN> es una cadena de caracteres, pero <SPAN  CLASS="textsf">aBuf</SPAN> es un array de bytes. Y no puedes concatenar una cadena de caracteres con un array de bytes --ni siquiera con una cadena de caracteres vacía.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">En cualquier caso ¿Qué es <SPAN  CLASS="textsf">self._mLastChar</SPAN>? En el método <SPAN  CLASS="textsf">feed()</SPAN>, mira unas líneas más abajo en el que la traza ha sucedido.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><pre>
if self._mInputState == ePureAscii:
    if self._highBitDetector.search(aBuf):
        self._mInputState = eHighbyte
    elif (self._mInputState == ePureAscii) and              self._escDetector.search(self._mLastChar + aBuf):
        self._mInputState = eEscAscii
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">(* 
<FONT COLOR="#000000">self._mLastChar = aBuf[-1] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">Se llama al método <SPAN  CLASS="textsf">feed()</SPAN> una y otra vez con unos pocos bytes cada vez. El método procesa los bytes (pasados en <SPAN  CLASS="textsf">aBuf</SPAN>), luego almacena el último byte en <SPAN  CLASS="textsf">self._mLastChar</SPAN> por si se necesita en la siguiente llamada. (En una codificación multibyte el método <SPAN  CLASS="textsf">feed()</SPAN> podría ser llamado a la mitad de un carácter para volver a ser llamado después con la otra mitad). Pero ya que <SPAN  CLASS="textsf">aBuf</SPAN> ahora es un array de bytes en lugar de una cadena de caracteres, <SPAN  CLASS="textsf">self._mLastChar</SPAN> también necesita ser un array de bytes. Así:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><pre>
  def reset(self):
      .
      .
      .
      (* 
<FONT COLOR="#ff0000">-     self._mLastChar = '' *)
      (* 
<FONT COLOR="#000000">+     self._mLastChar = b'' *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Si buscamos a lo largo de todo el código por ``<SPAN  CLASS="textsf">mLastChar</SPAN>'' encontramos un problema similar en <SPAN  CLASS="textsf">mbcharsetprober.py</SPAN>, pero en lugar de mantener el último carácter, mantiene el recuerdo de los <SPAN  CLASS="textbf">dos</SPAN> últimos. La clase <SPAN  CLASS="textsf">MultiByteCharSetProber</SPAN> utiliza una lista de cadenas de caracteres de un solo carácter para mantener los últimos dos caracteres. En Python 3 necesita utilizar una lista de enteros ya que en realidad no está manteniendo caracteres, sino bytes (Los bytes son enteros entre <SPAN  CLASS="textsf">0-255</SPAN>).
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
  class MultiByteCharSetProber(CharSetProber):
      def __init__(self):
          CharSetProber.__init__(self)
          self._mDistributionAnalyzer = None
          self._mCodingSM = None
          (* 
<FONT COLOR="#ff0000">-         self._mLastChar = ['&#92;x00', '&#92;x00'] *)
          (* 
<FONT COLOR="#000000">+         self._mLastChar = [0, 0] *)
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">def reset(self):
          CharSetProber.reset(self)
          if self._mCodingSM:
              self._mCodingSM.reset()
          if self._mDistributionAnalyzer:
              self._mDistributionAnalyzer.reset()
          (* 
<FONT COLOR="#ff0000">-         self._mLastChar = ['&#92;x00', '&#92;x00'] *)
          (* 
<FONT COLOR="#000000">+         self._mLastChar = [0, 0] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001266000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">6</SPAN> Tipo del operando no soportado para +: 'int' y 'bytes'</A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Tengo buenas y malas noticias. Las buenas noticias es que estamos haciendo progresos...
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml
Traceback (most recent call last):
  File "test.py", line 10, in &lt;module&gt;
    u.feed(line)
  File "C:.py", line 101, in feed
    self._escDetector.search(self._mLastChar + aBuf):
TypeError: unsupported operand type(s) for +: 'int' and 'bytes'</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">...las malas noticias es que no siempre da esa sensación.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¡Pero es progreso! ¡En serio! Incluso aunque la traza da el error en la misma línea de código: es un error diferente al que era. ¡Progreso! ¿Cuál es el problema ahora? La última vez miramos, esta línea de código no intentaba concatenar un <SPAN  CLASS="textsf">int</SPAN> con un array de bytes(<SPAN  CLASS="textsf">bytes</SPAN>). De hecho, hemos pasado un buen rato tratando de asegurar que <SPAN  CLASS="textsf">self._mLastChar</SPAN> fuera un array de bytes. Cómo se convirtió en un <SPAN  CLASS="textsf">int</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">La respuesta descansa en las líneas siguientes de código:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
if self._mInputState == ePureAscii:
    if self._highBitDetector.search(aBuf):
        self._mInputState = eHighbyte
    elif (self._mInputState == ePureAscii) and              self._escDetector.search(self._mLastChar + aBuf):
        self._mInputState = eEscAscii
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">(* 
<FONT COLOR="#000000">self._mLastChar = aBuf[-1] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><blockquote>Cada elemento en una cadena de caracteres es una cadena de caracteres. Cada elemento en una array de bytes es un entero</blockquote>  
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#">Este error no sucede la primera vez que se ejecuta el método <SPAN  CLASS="textsf">feed()</SPAN>. Ocurre la <SPAN  CLASS="textbf">segunda vez</SPAN>, después de que <SPAN  CLASS="textsf">self._mLastChar</SPAN> se haya activado con el último byte de <SPAN  CLASS="textsf">aBuf</SPAN>. Bien ¿Cuál es el problema? Al obtener un elemento de un array de bytes se genera un valor entero (<SPAN  CLASS="textsf">int</SPAN>), no un array de bytes. Para ver la diferencia, sígueme en esta consola interactiva:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><pre>
&#187;&gt; aBuf = b''
&#187;&gt; len(aBuf)
3
&#187;&gt; mLastChar = aBuf[-1]
&#187;&gt; mLastChar            
191
&#187;&gt; type(mLastChar)      
&lt;class 'int'&gt;
&#187;&gt; mLastChar + aBuf    
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: unsupported operand type(s) for +: 'int' and 'bytes'
&#187;&gt; mLastChar = aBuf[-1:]
&#187;&gt; mLastChar
b''
&#187;&gt; mLastChar + aBuf    
b''</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<OL>
<LI><SPAN  CLASS="textbf">Línea 1:</SPAN> Define un array de bytes de longitud 3.
</LI>
<LI><SPAN  CLASS="textbf">Línea 5:</SPAN> El último elemento del array de bytes es 191.
</LI>
<LI><SPAN  CLASS="textbf">Línea 7:</SPAN> Es un entero.
</LI>
<LI><SPAN  CLASS="textbf">Línea 9:</SPAN> No se puede concatenar un entero con un array de bytes. Con esto está replicado el error que se ha encontrado en <SPAN  CLASS="textsf">universaldetector.py</SPAN>.
</LI>
<LI><SPAN  CLASS="textbf">Línea 13:</SPAN> Esta es la forma de arreglarlo. En lugar de tomar el último elemento del array de bytes, utiliza la selección de listas para crear un nuevo array de bytes de un único elemento. Este array de bytes comienza con el último elemento y continua la selección hasta el final del array. Ahora <SPAN  CLASS="textsf">mLastChar</SPAN> contiene un array de longitud 1.
</LI>
<LI><SPAN  CLASS="textbf">Línea 16:</SPAN> Al concatenar un array de longitud 1 con otro de longitud 3 da como resultado un nuevo array de bytes de longitud 4.
</LI>
</OL><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#">Así, para asegurar que el método <SPAN  CLASS="textsf">feed()</SPAN> de <SPAN  CLASS="textsf">universaldetector.py</SPAN> continúa funcionando todas las veces que sea llamado, necesitas inicializar <SPAN  CLASS="textsf">self._mLastChar</SPAN> como un array de bytes de longitud cero, y luego asegurar que sigue conteniendo un array de bytes permanentemente.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><pre>
              self._escDetector.search(self._mLastChar + aBuf):
          self._mInputState = eEscAscii
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#">(* 
<FONT COLOR="#ff0000">- self._mLastChar = aBuf[-1] *)
(* 
<FONT COLOR="#000000">+ self._mLastChar = aBuf[-1:] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001267000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">7</SPAN> <SPAN  CLASS="textsf">ord()</SPAN> esperaba una cadena de caracteres de longitud 1, pero encontró un <SPAN  CLASS="textsf">int</SPAN></A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¿Cansado ya? Casi hemos terminado...
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml   ascii with confidence 1.0
tests5804.blogspot.com.xml
Traceback (most recent call last):
  File "test.py", line 10, in &lt;module&gt;
    u.feed(line)
  File "C:.py", line 116, in feed
    if prober.feed(aBuf) == constants.eFoundIt:
  File "C:.py", line 60, in feed
    st = prober.feed(aBuf)
  File "C:8prober.py", line 53, in feed
    codingState = self._mCodingSM.next_state(c)
  File "C:.py", line 43, in next_state
    byteCls = self._mModel['classTable'][ord(c)]
TypeError: ord() expected string of length 1, but int found</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Ok, así que <SPAN  CLASS="textsf">c</SPAN> contiene un número entero, pero la función <SPAN  CLASS="textsf">ord()</SPAN> estaba esperando una cadena de caracteres de un solo carácter. Es justo. ¿Dónde está definido <SPAN  CLASS="textsf">c</SPAN>?
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
# codingstatemachine.py
def next_state(self, c):
    # for each byte we get its class
    # if it is first byte, we also get byte length
    byteCls = self._mModel['classTable'][ord(c)]</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Este no es de ayuda; simplemente sabemos que es un parámetro de la función. Vamos a tirar de la traza.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
# utf8prober.py
def feed(self, aBuf):
    for c in aBuf:
        codingState = self._mCodingSM.next_state(c)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¿Lo ves? En Python 2 <SPAN  CLASS="textsf">aBuf</SPAN> era una cadena de caracteres, así que <SPAN  CLASS="textsf">c</SPAN> era una cadena de un solo carácter (Eso es lo que recuperas cuando iteras a través de una cadena de caracteres --todos los caracteres, de uno en uno). Pero ahora <SPAN  CLASS="textsf">aBuf</SPAN> es un array de bytes, así que <SPAN  CLASS="textsf">c</SPAN> es un <SPAN  CLASS="textsf">int</SPAN>, no una cadena de un carácter. En otras palabras, no hay necesidad de llamar a la función <SPAN  CLASS="textsf">ord()</SPAN> ya que <SPAN  CLASS="textsf">c</SPAN> ya es de tipo entero.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Así que:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
  def next_state(self, c):
      # for each byte we get its class
      # if it is first byte, we also get byte length
      (* 
<FONT COLOR="#ff0000">-     byteCls = self._mModel['classTable'][ord(c)] *)
      (* 
<FONT COLOR="#000000">+     byteCls = self._mModel['classTable'][c] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Si se busca en el código por llamadas a <SPAN  CLASS="textsf">ord(c)</SPAN> se descubren problemas similares en <SPAN  CLASS="textsf">sbcharsetprober.py</SPAN>...
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
# sbcharsetprober.py
def feed(self, aBuf):
    if not self._mModel['keepEnglishLetter']:
        aBuf = self.filter_without_english_letters(aBuf)
    aLen = len(aBuf)
    if not aLen:
        return self.get_state()
    for c in aBuf:
    (* 
<FONT COLOR="#000000"> order = self._mModel['charToOrderMap'][ord(c)] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#">Y en <SPAN  CLASS="textsf">latin1prober.py</SPAN>...
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><pre>
# latin1prober.py
def feed(self, aBuf):
    aBuf = self.filter_with_english_letters(aBuf)
    for c in aBuf:
    (* 
<FONT COLOR="#000000">charClass = Latin1_CharToClass[ord(c)] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><SPAN  CLASS="textsf">c</SPAN> itera sobre <SPAN  CLASS="textsf">aBuf</SPAN>, lo que significa que es un entero, no una cadena de caracteres de longitud 1. La solución es la misma: cambiar <SPAN  CLASS="textsf">ord(c)</SPAN> por <SPAN  CLASS="textsf">c</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><pre>
  # sbcharsetprober.py
  def feed(self, aBuf):
      if not self._mModel['keepEnglishLetter']:
          aBuf = self.filter_without_english_letters(aBuf)
      aLen = len(aBuf)
      if not aLen:
          return self.get_state()
      for c in aBuf:
          (* 
<FONT COLOR="#ff0000">-         order = self._mModel['charToOrderMap'][ord(c)] *)
          (* 
<FONT COLOR="#000000">+         order = self._mModel['charToOrderMap'][c] *)
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"># latin1prober.py
  def feed(self, aBuf):
      aBuf = self.filter_with_english_letters(aBuf)
      for c in aBuf:
          (*
<FONT COLOR="#ff0000">-         charClass = Latin1_CharToClass[ord(c)] *)
          (*
<FONT COLOR="#000000">+         charClass = Latin1_CharToClass[c] *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001268000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">8</SPAN> Tipos no ordenables: <SPAN  CLASS="textsf">int() &gt;= str()</SPAN></A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Sigamos:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml                       ascii with confidence 1.0
tests5804.blogspot.com.xml
Traceback (most recent call last):
  File "test.py", line 10, in &lt;module&gt;
    u.feed(line)
  File "C:.py", line 116, in feed
    if prober.feed(aBuf) == constants.eFoundIt:
  File "C:.py", line 60, in feed
    st = prober.feed(aBuf)
  File "C:.py", line 68, in feed
    self._mContextAnalyzer.feed(self._mLastChar[2 - charLen :], charLen)
  File "C:.py", line 145, in feed
    order, charLen = self.get_order(aBuf[i:i+2])
  File "C:.py", line 176, in get_order
    if ((aStr[0] &gt;= '81') and (aStr[0] &lt;= '9F')) or  TypeError: unorderable types: int() &gt;= str()</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">¿Qué significa esto? ¿Tipos no ordenables? De nuevo, la diferencia entre los arrays de bytes y las cadenas de caracteres nos ataca. Echa un vistazo al código:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
class SJISContextAnalysis(JapaneseContextAnalysis):
    def get_order(self, aStr):
        if not aStr: return -1, 1
        # find out current char's byte length
        (* 
<FONT COLOR="#000000">if ((aStr[0] &gt;= '&#92;x81') and (aStr[0] &lt;= '&#92;x9F')) or &#92;*)
           ((aStr[0] &gt;= '0') and (aStr[0] &lt;= '')):
            charLen = 2
        else:
            charLen = 1</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#">¿Y de dónde viene <SPAN  CLASS="textsf">aStr</SPAN>? Miremos la traza:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><pre>
def feed(self, aBuf, aLen):
    .
    .
    .
    i = self._mNeedToSkipCharNum
    while i &lt; aLen:
        (* 
<FONT COLOR="#000000">order, charLen = self.get_order(aBuf[i:i+2]) *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">Otra vez nuestro viejo amigo <SPAN  CLASS="textsf">aBuf</SPAN>. Como ya has adivinado de todos los problemas anteriores <SPAN  CLASS="textsf">aBuf</SPAN> es un array de bytes. Aquí, el método <SPAN  CLASS="textsf">feed()</SPAN> no lo pasa completo; pasa una sección. Pero como viste anteriormente en el capítulo, una partición de un array de bytes devuelve un array de bytes, así que el parámetro <SPAN  CLASS="textsf">aStr</SPAN> que se pasa, a su vez, al método <SPAN  CLASS="textsf">get_order()</SPAN> es un array de bytes.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">¿Y qué intenta hacer el código con <SPAN  CLASS="textsf">aStr</SPAN>? Toma el primer elemento del array de bytes y lo compara con una cadena de longitud 1. En Python 2 esto funcionaba porque <SPAN  CLASS="textsf">aStr</SPAN> y <SPAN  CLASS="textsf">aBuf</SPAN> eran cadenas, y <SPAN  CLASS="textsf">aStr[0]</SPAN> seguía siendo una cadena de caracteres, y se pueden comparar cadenas de caracteres para ver si son distintas. Pero en Python 3 <SPAN  CLASS="textsf">aStr</SPAN> y <SPAN  CLASS="textsf">aBuf</SPAN> son arrays de bytes, <SPAN  CLASS="textsf">aStr[0]</SPAN> es un número entero y no se pueden comparar enteros y cadenas de caracteres sin realizar la conversión de uno de ellos.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">En este caso no hay necesidad de hacer el código más complicado añadiendo una conversión explícita. <SPAN  CLASS="textsf">aStr[0]</SPAN> devuelve un entero; las cosas que estás comparando son constantes. Así que vamos a cambiarlas de ser cadenas de caracteres de longitud 1 a números enteros. Y mientras estamos en ello, vamos a cambiar <SPAN  CLASS="textsf">aStr</SPAN> a <SPAN  CLASS="textsf">aBuf</SPAN>, ya que realmente no es una cadena de caracteres.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><pre>
  class SJISContextAnalysis(JapaneseContextAnalysis):
(* 
<FONT COLOR="#ff0000">-     def get_order(self, aStr): *)
(* 
<FONT COLOR="#ff0000">-      if not aStr: return -1, 1 *)
(* 
<FONT COLOR="#000000">+     def get_order(self, aBuf): *)
(* 
<FONT COLOR="#000000">+      if not aBuf: return -1, 1 *)
          # find out current char's byte length
(* 
<FONT COLOR="#ff0000">-         if ((aStr[0] &gt;= '&#92;x81') and (aStr[0] &lt;= '&#92;x9F')) or  *)
(* 
<FONT COLOR="#ff0000">-            ((aBuf[0] &gt;= '&#92;xE0') and (aBuf[0] &lt;= '&#92;xFC')): *)
(* 
<FONT COLOR="#000000">+         if ((aBuf[0] &gt;= 0x81) and (aBuf[0] &lt;= 0x9F)) or &#92;*)
(* 
<FONT COLOR="#000000">+            ((aBuf[0] &gt;= 0xE0) and (aBuf[0] &lt;= 0xFC)): *)
              charLen = 2
          else:
              charLen = 1
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"># return its order if it is hiragana
(* 
<FONT COLOR="#ff0000">-      if len(aStr) &gt; 1: *)
(* 
<FONT COLOR="#ff0000">-             if (aStr[0] == '&#92;202') and  *)
(* 
<FONT COLOR="#ff0000">-                (aStr[1] &gt;= '&#92;x9F') and  *)
(* 
<FONT COLOR="#ff0000">-                (aStr[1] &lt;= '&#92;xF1'): *)
(* 
<FONT COLOR="#ff0000">-                return ord(aStr[1]) - 0x9F, charLen *)
(* 
<FONT COLOR="#000000">+      if len(aBuf) &gt; 1: *)
(* 
<FONT COLOR="#000000">+             if (aBuf[0] == 202) and  *)
(* 
<FONT COLOR="#000000">+                (aBuf[1] &gt;= 0x9F) and  *)
(* 
<FONT COLOR="#000000">+                (aBuf[1] &lt;= 0xF1): *)
(* 
<FONT COLOR="#000000">+                return aBuf[1] - 0x9F, charLen *)
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">return -1, charLen
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">class EUCJPContextAnalysis(JapaneseContextAnalysis):
(* 
<FONT COLOR="#ff0000">-     def get_order(self, aStr): *)
(* 
<FONT COLOR="#ff0000">-      if not aStr: return -1, 1 *)
(* 
<FONT COLOR="#000000">+     def get_order(self, aBuf): *)
(* 
<FONT COLOR="#000000">+      if not aBuf: return -1, 1 *)
          # find out current char's byte length
(* 
<FONT COLOR="#ff0000">-         if (aStr[0] == '&#92;x8E') or  *)
(* 
<FONT COLOR="#ff0000">-           ((aStr[0] &gt;= '&#92;xA1') and (aStr[0] &lt;= '&#92;xFE')): *)
(* 
<FONT COLOR="#000000">+         if (aBuf[0] == 0x8E) or  *)
(* 
<FONT COLOR="#000000">+           ((aBuf[0] &gt;= 0xA1) and (aBuf[0] &lt;= 0xFE)): *)
              charLen = 2
(* 
<FONT COLOR="#ff0000">-         elif aStr[0] == '&#92;x8F': *)
(* 
<FONT COLOR="#000000">+         elif aBuf[0] == 0x8F: *)
              charLen = 3
          else:
              charLen = 1
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"># return its order if it is hiragana
(* 
<FONT COLOR="#ff0000">-    if len(aStr) &gt; 1: *)
(* 
<FONT COLOR="#ff0000">-           if (aStr[0] == '&#92;xA4') and  *)
(* 
<FONT COLOR="#ff0000">-              (aStr[1] &gt;= '&#92;xA1') and  *)
(* 
<FONT COLOR="#ff0000">-              (aStr[1] &lt;= '&#92;xF3'): *)
(* 
<FONT COLOR="#ff0000">-                 return ord(aStr[1]) - 0xA1, charLen *)
(* 
<FONT COLOR="#000000">+    if len(aBuf) &gt; 1: *)
(* 
<FONT COLOR="#000000">+           if (aBuf[0] == 0xA4) and  *)
(* 
<FONT COLOR="#000000">+              (aBuf[1] &gt;= 0xA1) and  *)
(* 
<FONT COLOR="#000000">+              (aBuf[1] &lt;= 0xF3): *)
(* 
<FONT COLOR="#000000">+               return aBuf[1] - 0xA1, charLen *)
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">return -1, charLen</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">La búsqueda de más ocurrencias de la función <SPAN  CLASS="textsf">ord()</SPAN> en el código descubre el mismo problema en <SPAN  CLASS="textsf">chardistribution.py</SPAN> (específicamente en <SPAN  CLASS="textsf">EUCTWDistributionAnalysis</SPAN>, <SPAN  CLASS="textsf">EUCKRDistributionAnalysis</SPAN>, <SPAN  CLASS="textsf">GB2312DistributionAnalysis</SPAN>, <SPAN  CLASS="textsf">Big5DistributionAnlysis</SPAN>, <SPAN  CLASS="textsf">SJIDistributionAnalysis</SPAN>, y <SPAN  CLASS="textsf">EUCJPDistributionAnalysis</SPAN>. En cada caso, la subsanación es similar a la realizada en las clases <SPAN  CLASS="textsf">EUCJPContextAnalysis</SPAN> y <SPAN  CLASS="textsf">SJISContextAnalysis</SPAN> de <SPAN  CLASS="textsf">jpcntx.py</SPAN>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H2><A NAME="SECTION001269000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">6</SPAN>.<SPAN CLASS="arabic">9</SPAN> El nombre global ``<SPAN  CLASS="textsf">reduce</SPAN>'' no está definido</A>
</H2><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">De nuevo en la brecha...
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT><TABLE  WIDTH="100%">
<TR><TD>
<pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml                       ascii with confidence 1.0
tests5804.blogspot.com.xml
Traceback (most recent call last):
  File "test.py", line 12, in &lt;module&gt;
    u.close()
  File "C:.py", line 141, in close
    proberConfidence = prober.get_confidence()
  File "C:1prober.py", line 126, in get_confidence
    total = reduce(operator.add, self._mFreqCounter)
NameError: global name 'reduce' is not defined</pre></TD></TR>
</TABLE><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">De acuerdo a la guía oficial ``Qué es lo nuevo de Python 3.0''<A NAME="tex2html211"
  HREF="footnode.html#foot17920"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">8</SPAN></SUP></A>, la función <SPAN  CLASS="textsf">reduce()</SPAN> se ha movido del espacio global de nombres al módulo <SPAN  CLASS="textsf">functools</SPAN>. Parafraseando a la guía: utiliza <SPAN  CLASS="textsf">functools.reduce()</SPAN> si realmente lo necesitas; sin embargo, el 99% de las ocasiones, un bucle <SPAN  CLASS="textsf">for loop</SPAN> resulta más legible. Puedes leer más sobre esta decisión de Guido van Rossum en su blog: La fortuna de reduce() en Python 3.00<A NAME="tex2html213"
  HREF="footnode.html#foot17921"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">9</SPAN></SUP></A>.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><pre>
def get_confidence(self):
    if self.get_state() == constants.eNotMe:
        return 0.01
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">(* 
<FONT COLOR="#000000">total = reduce(operator.add, self._mFreqCounter) *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">La función <SPAN  CLASS="textsf">reduce()</SPAN> toma dos parámetros --una función y una lista (estrictamente, un objeto iterable)-- y aplica la función acumulativamente a cada elemento de la lista. En otras palabras, es una forma de sumar todos los elementos de una lista y devolver el resultado.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">Esta monstruosidad era tan común que Python añadió una función <SPAN  CLASS="textsf">sum()</SPAN> global.
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><pre>
def get_confidence(self):
      if self.get_state() == constants.eNotMe:
          return 0.01
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#">(* 
<FONT COLOR="#ff0000">-     total = reduce(operator.add, self._mFreqCounter) *)
          (* 
<FONT COLOR="#000000">+     total = sum(self._mFreqCounter) *)</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#">Ya que dejamos de usar el módulo <SPAN  CLASS="textsf">operator</SPAN>, podemos suprimir el <SPAN  CLASS="textsf">import</SPAN> correspondiente del fichero:
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><pre>
from .charsetprober import CharSetProber
  from . import constants
  (* 
<FONT COLOR="#ff0000">- import operator *) (* 
<FONT COLOR="#000000"> *)
 </pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#000000">¿Otra prueba?
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#000000"><pre>
C:&gt; python test.py tests&sstarf#star;&sstarf#star;
tests.diveintomark.org.xml                       ascii with confidence 1.0
tests5804.blogspot.com.xml                             Big5 with confidence 0.99
tests5.worren.net.xml                               Big5 with confidence 0.99
tests5.blogspot.com.xml                        Big5 with confidence 0.99
tests5.blogspot.com.xml                        Big5 with confidence 0.99
tests5.org.tw.xml                               Big5 with confidence 0.99
tests5.com.xml                               Big5 with confidence 0.99
tests5.us.xml                                       Big5 with confidence 0.99
tests5.blogspot.com.xml                         Big5 with confidence 0.99
tests5.blogspot.com.xml                       Big5 with confidence 0.99
tests5207.blogspot.com.xml                            Big5 with confidence 0.99
tests5.blogspot.com.xml                         Big5 with confidence 0.99
tests5.blogspot.com.xml                       Big5 with confidence 0.99
tests5.blogspot.com.xml                         Big5 with confidence 0.99
tests5.blogspot.com.xml                        Big5 with confidence 0.99
tests5.pchome.com.tw.xml                          Big5 with confidence 0.99
tests5-design.com.xml                                Big5 with confidence 0.99
tests5.blogspot.com.xml                         Big5 with confidence 0.99
tests5.edu.tw.xml                                 Big5 with confidence 0.99
tests51976.blogspot.com.xml                       Big5 with confidence 0.99
tests5.blogspot.com.xml                           Big5 with confidence 0.99
tests5.blog.xubg.com.xml                              Big5 with confidence 0.99
tests5.com.xml                            Big5 with confidence 0.99
tests5.com.xml                                    Big5 with confidence 0.99
tests5.blogspot.com.xml                      Big5 with confidence 0.99
tests5.blogspot.com.xml                              Big5 with confidence 0.99
tests-JP.co.jp.xml                                  EUC-JP with confidence 0.99
tests-JP.main.jp.xml                             EUC-JP with confidence 0.99
tests-JP.jp.xml                                  EUC-JP with confidence 0.99
.
.
.
316 tests</pre> </FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#000000">¡Funciona! ¡Quiero bailar un ratito!<A NAME="tex2html215"
  HREF="footnode.html#foot17922"><SUP><SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">10</SPAN></SUP></A></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<H1><A NAME="SECTION001270000000000000000">
<SPAN CLASS="arabic">9</SPAN>.<SPAN CLASS="arabic">7</SPAN> Resumen</A>
</H1><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#000000">¿Qué hemos aprendido?
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<OL>
<LI>Migrar una cantidad no trivial de código de Python 2 a Python 3 es un ``dolor''. No hay forma de evitarlo. Es duro.
</LI>
<LI>La herramienta <SPAN  CLASS="textsf">2to3</SPAN> es útil pero solamente cubre lo más fácil: cambios de nombre de funciones, cambios de nombre de módulos, cambios de sintaxis. Es una pieza de ingeniería impresionante, pero al final es solo un robot de búsqueda y sustitución avanzada.
</LI>
<LI>El primer problema en esta librería fue la diferencia existente entre cadenas de caracteres y bytes. En este caso parece obvio ya que el objetivo de esta librería es convertir bytes en cadenas de caracteres. Pero esto sucede más a menudo de lo que parece. Cualquier lectura de un fichero en modo binario devuelve un array de bytes. Cuando se recupera una página web, cuando se llama a una API en la web. Todo ello devuelve un array de bytes.

<P>
</LI>
<LI>Necesitas conocer tu programa. Profundamente. Muchas veces lo has escrito tú, pero otras no. Hay que conocer el porqué de su código. Los errores aparecen en cualquier sitio y hay que corregirlos.
</LI>
<LI>Los casos de prueba son fundamentales. No migres nada sin ellos. La única razón por la que tengo confianza en que <SPAN  CLASS="textsf">chardet</SPAN> funcione en Python 3 es que comencé con una suite de pruebas que recorre la mayor parte del código de esta librería. Si no dispones de pruebas, escribe algunas antes de iniciar la migración a Python 3. Si tienes algunas pruebas: escribe más. Si tienes muchas pruebas, puedes empezar la diversión.

<P>
</LI>
</OL><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#000000">
</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<P>
<FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#"><FONT COLOR="#ff0000"><FONT COLOR="#"><FONT COLOR="#ff0000"></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT>
<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<B> Siguiente:</B> <A NAME="tex2html1027"
  HREF="node13.html">10. Empaquetando librerías en</A>
<B> Subir a:</B> <A NAME="tex2html1025"
  HREF="inmersionEnPython.html">Inmersión en Python 3</A>
<B> Anterior:</B> <A NAME="tex2html1019"
  HREF="node11.html">8. Serialización de Objetos</A></DIV>
<!--End of Navigation Panel-->
<ADDRESS>
José Miguel González Aguilera
2016-08-18
</ADDRESS>
</BODY>
</HTML>
